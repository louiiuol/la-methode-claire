<ng-container *ngIf="lessons$ | async as lessons">
	<ng-container *ngIf="lessons.length; else: libraryUnavailable">
		<app-progress-bar
			class="rounded-t-xl mat-elevation-z2"
			[currentLesson]="currentLesson"
			[hasValidSubscription]="hasValidSubscription"
			[lessons]="lessons"
			(selectedLesson)="currentLesson = $event" />
		<app-course-viewer
			style="height: calc(100dvh - 184px)"
			class="rounded-b-xl overflow-hidden mat-elevation-z2 block"
			[currentLessonIndex]="currentLesson"
			[course]="lessons[currentLesson]"
			(nextLesson)="currentLesson = $event" />
	</ng-container>
	<ng-template #libraryUnavailable>
		<app-card title="Méthode inaccessible" class="w-80 mt-7 text-center">
			<img
				class="w-44"
				src="assets/img/illustrations/poster.png"
				alt="Not found" />
			<p>
				La méthode n'est pas disponible pour le moment, merci de revenir plus
				tard.
			</p>
		</app-card>
	</ng-template>
</ng-container>
